{% extends 'base.html' %}

{% block content %}
<style>
    #menu_history{
        background: gray;


}
</style>


<form action="" method="post" style="flex-direction: row;justify-content: space-evenly;" novalidate>
    {{ form.hidden_tag() }}
    <p>
        {{ form.analysis_number.label }}
        {{ form.analysis_number(size=40) }}
        <br>
        {% for error in form.analysis_number.errors %}
        <span style="color: red;">[{{ error }}]</span>
        {% endfor %}

    </p>
    <p>{{ form.submit() }}</p>
<!--    <button class="button" type="button" style="height:30px;max-width:150px;margin-top:0%;display:flex;justify-content:center;align-items:center;margin-left:10px">-->
<!--            Поиск-->
<!--    </button>-->
</form>

<div class="container-table" style="width:100%;justify-content: center">
    <div class="box" style="background: #eff1f4;min-width: 192px;">
        Файл
    </div>
    <div class="box" style="background: #eff1f4;">
        Дата исследования
    </div>
    <div class="box" style="background: #eff1f4;">
        Статус
    </div>
    <div class="box" style="background: #eff1f4;">
        Номер исследования
    </div>
    <div class="box" style="background: #eff1f4;min-width: 80px">
        Найдено митозов
    </div>
    <div class="box" style="background: #eff1f4;">
        Скачать результат
    </div>
</div>

<section class="progress-area"></section>
<section class="uploaded-area">
    {% if tasks %}
    {% for task in tasks %}
        <div class="container-table" id="{{ task.id }}" style="width:100%;justify-content:center">
            <div class="box" id="datetime" style="justify-content:flex-start;min-width:192px;word-break:break-all;">
                <img src="./static/logo/file.png">
                <span class="name">{{ task.images.filename }}</span>
            </div>
            <div class="box" id="status" style="justify-content: center">
                <div class="content" style="justify-content: center; align-items: center">
                    <div class="details" style="justify-content: center">
                        <span class="name"></span>
                        <span class="percent"></span>
                    </div>
                    <div class="progress-bar" style="width: 90%">
                        <div class="progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="box" id="analysis_number" style="justify-content: center;word-break: break-all">

            </div>
            <div class="box" id="result" style="justify-content: center;min-width: 80px">

            </div>
            <div class="box">
                <a class="button_download" href="" style="display:none">
                    <img src="/static/logo/download_green.png" alt="#" title="Скачать изображения">
                </a>
                <a class="button_cancel" href="" style="display:none">
                    <img src="/static/logo/remove.png" alt="#" title="Удалить Изображения">
                </a>
            </div>
        </div>
    {% endfor %}
    {% endif %}
</section>
<ul class="pager">
    <li class="previous" style="{% if not prev_url %}display: none{% endif %}">
        <a href="{{ prev_url or '#' }}"><span aria-hidden="true">&larr;</span>назад

        </a>
    </li>
    <li class="next" style="{% if not next_url %}display: none{% endif %}">
        <a href="{{ next_url or '#' }}">вперед<span aria-hidden="true">&rarr;</span>
        </a>
    </li>
</ul>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://malsup.github.io/jquery.form.js"></script>
<script src="/static/js/get_analysis_jquery.js"></script>
<script>
    const fileInput = document.querySelector("#submit"),
    bottomInputFile = document.querySelector("button");
    bottomInputFile.addEventListener("click", ()=>{fileInput.click();});
</script>
{{ super() }}
{% endblock %}

