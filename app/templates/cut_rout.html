{% extends 'base.html' %}

{% block content %}
<style>
    #menu_cutting{
        background: white;

}
</style>

<div class="container-table">
<div class="box" style="background: #eff1f4;">
    Выберите файл
</div>
<div class="box" style="background: #eff1f4;">
    Обработка
</div>
<div class="box" style="background: #eff1f4;">

</div>
<div class="box" style="background: #eff1f4;">

</div>
<div class="box" style="background: #eff1f4;">
    Скачать
</div>
</div>
<div class="container-table">

    <div class="box" id="datetime" style="justify-content: center">
        <form action="{{url_for('main.cut_rout')}}" style="margin-top:0%" enctype="multiple / form-data">
            <input type="file" name="file" class="input-file" hidden>
            <button class="button" type="button" style="margin-top:0%">Выбрать файл</button>
        </form>
        <section class="uploaded-area"></section>
    </div>

    <div class="box" id="name" style="justify-content: center">
        <img id="img_file" src="/static/logo/load.gif" style="border-radius:0;display:none;">
        <section class="progress-area"></section>
    </div>


    <div class="box" id="status" style="justify-content: center">

    </div>


    <div class="box" id="result" style="justify-content: center">

    </div>

    <div class="box">
        <a class="button_download" href="" style="display:none;justify-content:flex-start"><img src="/static/logo/download.png" alt="#">Скачать</a><br>
    </div>
</div>

{% for task in data%}
    <div class="container-table">

    <div class="box" style="justify-content: center">
        <section class="uploaded-area">
            <li class="row" style="margin:0%;margin-bottom:0px;padding:0px">
                <div class="content" style='background:none;'>
                    <img src="/static/logo/file.png" style="margin-right:10%;margin-left:3px;">
                     <div class="details">
                        <span class="name">{{ task.get_filename() }}</span>
                    </div>
                </div>
             </li>
        </section>
    </div>

    <div class="box" style="justify-content: center">
        <section class="progress-area">
            <li class="row" style="margin:0%;margin-bottom:0px;padding:0px">
                <div class="content" style='background:none;width:120px'>
                    <div class="details">
                        <span class="name"style="margin-left:3px;margin-right:3px"></span>
                        <span class="percent"style="width:50px">{{ task.get_progress() }}%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="margin-top:5px;width: {{ task.get_progress }}"></div>
                    </div>
                </div>
            </li>
        </section>
    </div>


    <div class="box" style="justify-content: center">

    </div>


    <div class="box" style="justify-content: center">

    </div>

    <div class="box">
        <a class="button_download" href="{{ url_for('main.get_zip') + '/' + task.images.filename + '.zip' }}" style="display:none;justify-content:flex-start"><img src="/static/logo/download.png" alt="#">Скачать</a><br>
    </div>
</div>
{% endfor %}

<script src="/static/js/cut_rout_2.js"></script>

{{ super() }}
{% endblock %}