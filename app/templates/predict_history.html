{% extends 'base.html' %}

{% block content %}
<style>
    #menu_history{
        background: gray;


}
</style>


<form action="" method="post" style="flex-direction: row;justify-content: space-evenly;" novalidate>
    {{ form.hidden_tag() }}
    <p>
        {{ form.analysis_number.label }}
        {{ form.analysis_number(size=32) }}
<!--        <br>-->
<!--        {% for error in form.analysis_number.errors %}-->
<!--        <span style="color: red;">[{{ error }}]</span>-->
<!--        {% endfor %}-->

    </p>
    <p hidden>{{ form.submit() }}</p>
    <button class="button" type="button" style="height:30px;max-width:150px;margin-top:0%;display:flex;justify-content:center;align-items:center;margin-left:10px">
            Поиск
    </button>
</form>

<div class="container-table" style="width:100%;justify-content: center">
    <div class="box" style="background: #eff1f4;">
        Файл
    </div>
    <div class="box" style="background: #eff1f4;">
        Дата исследования
    </div>
    <div class="box" style="background: #eff1f4;">
        Статус
    </div>
    <div class="box" style="background: #eff1f4;">
        Номер исследования
    </div>
    <div class="box" style="background: #eff1f4;">
        Найдено митозов
    </div>
    <div class="box" style="background: #eff1f4;">
        Скачать результат
    </div>
</div>

<section class="uploaded-area">
    {% if data %}
    {% for predict in data %}
        <div class="container-table" id="{{ predict.id }}" style="width:100%;justify-content:center">
            <div class="box" id="filename" style="justify-content: flex-start;">
                <img src="./static/logo/file.png">
                <span class="name">{{ predict.images.filename }}</span>
            </div>
            <div class="box" id="datetime" style="justify-content: flex-start;">
                {{ predict.timestamp.strftime('%d.%m.%Y:%H/%M') }}
            </div>
            <div class="box" id="status" style="justify-content: center">
                Завершено
            </div>
            <div class="box" id="analysis_number" style="justify-content: center">
                {{ predict.images.analysis_number }}
            </div>
            <div class="box" id="result" style="justify-content: center">
                {{ predict.result_all_mitoz }}
            </div>
            <div class="box">
                <a class="button_download" href="" style="display:none">
                    <img src="/static/logo/download_green.png" alt="#">
                </a>
                <a class="button_cancel" href="" style="display:none">
                    <img src="/static/logo/remove.png" alt="#">
                </a>
            </div>
        </div>
    {% endfor %}
    {% endif %}
</section>
<ul class="pager">
    <li class="previous" style="{% if not prev_url %}display: none{% endif %}">
        <a href="{{ prev_url or '#' }}"><span aria-hidden="true">&larr;</span>назад

        </a>
    </li>
    <li class="next" style="{% if not next_url %}display: none{% endif %}">
        <a href="{{ next_url or '#' }}">вперед<span aria-hidden="true">&rarr;</span>
        </a>
    </li>
</ul>

<!--<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>-->
<!--<script src="https://malsup.github.io/jquery.form.js"></script>-->
<!--<script src="/static/js/get_analysis_jquery.js"></script>-->
<script>
    const fileInput = document.querySelector("#submit"),
    bottomInputFile = document.querySelector("button");
    bottomInputFile.addEventListener("click", ()=>{fileInput.click();});
</script>
{{ super() }}
{% endblock %}